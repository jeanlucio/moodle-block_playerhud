define("block_playerhud/manage_drops",["jquery","core/notification"],(function($,Notification){return{init:function(config){$("#codeGenModal").appendTo("body");var currentItem=config.item,langStrings=config.strings,currentDropCode=0,inputCode=document.getElementById("finalCode"),previewBox=document.getElementById("previewContainer"),groupTextLink=document.getElementById("textInputGroup"),inputLinkText=document.getElementById("customText"),groupCardOptions=document.getElementById("cardCustomOptions"),inputBtnText=document.getElementById("customBtnText"),inputBtnEmoji=document.getElementById("customBtnEmoji");function handleChange(e){(e.target.classList.contains("js-mode-trigger")||"customText"===e.target.id||"customBtnText"===e.target.id||"customBtnEmoji"===e.target.id)&&updateGenerator()}function updateGenerator(){var modeRadio=document.querySelector('input[name="codeMode"]:checked'),mode=modeRadio?modeRadio.value:"card",param=isNaN(currentDropCode)?"code="+currentDropCode:"id="+currentDropCode,code="[PLAYERHUD_DROP "+param+"]",previewHtml="";if(groupTextLink&&(groupTextLink.style.display="text"===mode?"block":"none"),groupCardOptions&&(groupCardOptions.style.display="card"===mode?"block":"none"),"text"===mode){var linkTxt=inputLinkText.value.trim()||langStrings.defaultText;code="[PLAYERHUD_DROP "+param+' mode=text text="'+linkTxt+'"]',previewHtml='<a href="#" onclick="return false;" class="text-primary fw-bold text-decoration-underline">'+linkTxt+"</a>"}else if("image"===mode){code="[PLAYERHUD_DROP "+param+" mode=image]",previewHtml='<div style="cursor:pointer; filter: drop-shadow(0 4px 2px rgba(0,0,0,0.1));">'+(currentItem.isImage?'<img src="'+currentItem.url+'" style="width:50px; height:50px; object-fit:contain;" alt="">':'<span style="font-size:40px;" aria-hidden="true">'+currentItem.content+"</span>")+"</div>"}else{var btnTxt=inputBtnText&&inputBtnText.value.trim()?inputBtnText.value.trim():langStrings.takeBtn,btnEmo=inputBtnEmoji&&inputBtnEmoji.value.trim()?inputBtnEmoji.value.trim():"",extraAttrs="";btnTxt!==langStrings.takeBtn&&(extraAttrs+=' button_text="'+btnTxt+'"'),""!==btnEmo&&(extraAttrs+=' button_emoji="'+btnEmo+'"'),code="[PLAYERHUD_DROP "+param+extraAttrs+"]";var iconHtml=currentItem.isImage?'<img src="'+currentItem.url+'" alt="">':'<div style="font-size:2.5em; line-height:1;">'+currentItem.content+"</div>",btnContent=btnTxt;btnEmo&&(btnContent='<span aria-hidden="true" class="me-1">'+btnEmo+"</span> "+btnTxt),previewHtml='<div class="ph-gen-preview-real-card"><span class="badge bg-info text-dark rounded-pill position-absolute" style="top:5px; right:5px; font-size:0.7rem;">'+langStrings.yours+'</span><div class="mb-2 d-flex align-items-center justify-content-center" style="height:60px;">'+iconHtml+'</div><strong class="d-block mb-2 text-truncate" style="font-size:0.9rem;">'+currentItem.name+'</strong><button class="btn btn-primary btn-sm w-100 shadow-sm">'+btnContent+"</button></div>"}inputCode&&(inputCode.value=code),previewBox&&(previewBox.innerHTML=previewHtml)}document.body.addEventListener("click",(function(e){var deleteBtn=e.target.closest(".js-delete-btn");if(deleteBtn)return e.preventDefault(),void Notification.confirm(langStrings.confirm_title,deleteBtn.getAttribute("data-confirm-msg"),langStrings.yes,langStrings.cancel,(function(){window.location.href=deleteBtn.getAttribute("href")}));var trigger=e.target.closest(".js-open-gen-modal");if(trigger){e.preventDefault(),currentDropCode=trigger.getAttribute("data-dropcode");var radioCard=document.getElementById("modeCard");radioCard&&(radioCard.checked=!0),inputLinkText&&(inputLinkText.value=langStrings.defaultText),inputBtnText&&(inputBtnText.value=langStrings.takeBtn),inputBtnEmoji&&(inputBtnEmoji.value=""),updateGenerator();var el=document.getElementById("codeGenModal");el&&("undefined"!=typeof bootstrap&&bootstrap.Modal?bootstrap.Modal.getOrCreateInstance(el).show():$(el).modal("show"))}if(e.target.closest("#copyFinalCode")&&inputCode){inputCode.select(),inputCode.setSelectionRange(0,99999),document.execCommand("copy");var fb=document.getElementById("copyFeedback");fb&&(fb.style.display="inline-block",setTimeout((function(){fb.style.display="none"}),3e3))}})),document.body.addEventListener("change",handleChange),document.body.addEventListener("input",handleChange)}}}));

//# sourceMappingURL=manage_drops.min.js.map