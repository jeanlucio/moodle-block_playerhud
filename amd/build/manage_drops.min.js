define("block_playerhud/manage_drops",["jquery","core/notification"],(function($){return{init:function(config){var currentItem=config.item,langStrings=config.strings,currentDropCode=0,inputCode=document.getElementById("finalCode"),inputText=document.getElementById("customText"),textGroup=document.getElementById("textInputGroup"),previewBox=document.getElementById("previewContainer"),copyFeedback=document.getElementById("copyFeedback");function updateGenerator(){var modeRadio=document.querySelector('input[name="codeMode"]:checked'),mode=modeRadio?modeRadio.value:"card",param=isNaN(currentDropCode)?"code="+currentDropCode:"id="+currentDropCode,code="[PLAYERHUD_DROP "+param+"]",previewHtml="";if("text"===mode){textGroup&&(textGroup.style.display="block");var displayTxt=inputText.value.trim();displayTxt||(displayTxt=langStrings.defaultText),code="[PLAYERHUD_DROP "+param+' mode=text text="'+(inputText.value.trim()||langStrings.defaultText)+'"]',previewHtml='<a href="#" onclick="return false;" class="text-primary" style="text-decoration:underline;">'+displayTxt+"</a>"}else if("image"===mode){textGroup&&(textGroup.style.display="none"),code="[PLAYERHUD_DROP "+param+" mode=image]",previewHtml='<div style="cursor:pointer; filter: drop-shadow(0 4px 2px rgba(0,0,0,0.1)); text-align:center;">'+(currentItem.isImage?'<img src="'+currentItem.url+'" style="width:50px; height:50px; object-fit:contain;" alt="">':'<span style="font-size:40px;" aria-hidden="true">'+currentItem.content+"</span>")+"</div>"}else{textGroup&&(textGroup.style.display="none"),previewHtml='<div style="padding: 15px; border-radius: 8px; display: inline-flex; align-items: center; gap: 15px; border: 2px dashed #0f6cbf; background: #f8f9fa;"><div>'+(currentItem.isImage?'<img src="'+currentItem.url+'" style="width:40px; height:40px; object-fit:contain;" alt="">':'<span style="font-size:30px;" aria-hidden="true">'+currentItem.content+"</span>")+'</div><div class="text-start"><strong>'+currentItem.name+'</strong> <span class="badge bg-info rounded-pill text-dark">'+langStrings.yours+'</span><br><small class="text-muted">'+currentItem.xp+'</small></div><button class="btn btn-primary btn-sm ms-3">'+langStrings.takeBtn+"</button></div>"}inputCode&&(inputCode.value=code),previewBox&&(previewBox.innerHTML=previewHtml)}document.body.addEventListener("click",(function(e){var trigger=e.target.closest(".js-open-gen-modal");if(trigger){e.preventDefault(),currentDropCode=trigger.getAttribute("data-dropcode");var radioCard=document.getElementById("modeCard");radioCard&&(radioCard.checked=!0),inputText&&(inputText.value=langStrings.defaultText,textGroup.style.display="none"),updateGenerator();var el=document.getElementById("codeGenModal");if(el)if("undefined"!=typeof bootstrap&&bootstrap.Modal)bootstrap.Modal.getOrCreateInstance(el).show();else $(el).modal("show")}e.target.closest("#copyFinalCode")&&inputCode&&(inputCode.select(),inputCode.setSelectionRange(0,99999),document.execCommand("copy"),copyFeedback&&(copyFeedback.style.display="inline-block",setTimeout((function(){copyFeedback.style.display="none"}),3e3)))})),document.body.addEventListener("change",(function(e){e.target.classList.contains("js-mode-trigger")&&updateGenerator()})),inputText&&(inputText.addEventListener("input",updateGenerator),inputText.addEventListener("focus",(function(){this.value===langStrings.defaultText&&(this.value="",updateGenerator())})))}}}));

//# sourceMappingURL=manage_drops.min.js.map