/**
 * Student View JS for PlayerHUD.
 *
 * @module     block_playerhud/view
 * @copyright  2026 Jean LÃºcio
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("block_playerhud/view",["jquery","core/notification"],(function($,Notification){return{init:function(config){$("#phItemModalView").appendTo("body"),$(".js-disable-hud").on("click",(function(e){e.preventDefault();var url=$(this).attr("href"),msg=$(this).attr("data-confirm-msg");Notification.confirm(config.strings.confirm_title,msg,config.strings.yes,config.strings.cancel,(function(){window.location.href=url}))})),$(document).on("keydown",".ph-item-trigger",(function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),$(this).click())})),$(document).on("click",".ph-item-trigger",(function(e){e.preventDefault();var trigger=$(this),name=trigger.attr("data-name"),xp=trigger.attr("data-xp"),img=trigger.attr("data-image"),isImg=trigger.attr("data-isimage"),date=trigger.attr("data-date"),timestamp=trigger.attr("data-timestamp"),count=trigger.attr("data-count"),desc=trigger.find(".ph-item-description-content").html();$("#phModalTitleView, #phModalNameView").text(name),$("#phModalXPView").text(xp);var descEl=$("#phModalDescView");desc&&""!==desc.trim()?descEl.html(desc):descEl.html('<i class="text-muted">'+config.strings.no_desc+"</i>");var badgeEl=$("#phModalCountBadgeView");count&&count>0?badgeEl.text("x"+count).show():badgeEl.hide();var imgCont=$("#phModalImageContainerView");imgCont.empty(),"1"==isImg||"true"===isImg?imgCont.append($("<img>",{src:img,class:"ph-modal-img",alt:"",style:"max-width:120px; max-height:120px; object-fit:contain;"})):imgCont.append($("<span>",{class:"ph-modal-emoji","aria-hidden":"true",style:"font-size:80px; line-height:1;",text:img}));var dateEl=$("#phModalDateView"),formattedDate="";if(timestamp&&timestamp>0){var lang=$("html").attr("lang")||"en";lang=lang.replace("_","-");try{formattedDate=new Date(1e3*parseInt(timestamp)).toLocaleDateString(lang,{day:"2-digit",month:"2-digit",year:"2-digit"})}catch(err){formattedDate=date}}else formattedDate=date;if(formattedDate){var prefix=config.strings&&config.strings.last_collected?config.strings.last_collected+" ":"";dateEl.find("span").text(prefix+formattedDate),dateEl.show()}else dateEl.hide();!function(){var el=document.getElementById("phItemModalView");if(void 0!==$&&$.fn.modal)$(el).modal("show");else try{bootstrap.Modal.getOrCreateInstance(el).show()}catch(e){console.error(e)}}()}))}}}));

//# sourceMappingURL=view.min.js.map