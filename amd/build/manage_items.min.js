define("block_playerhud/manage_items",["jquery","core/notification"],(function($,Notification){return{init:function(config){$("#phAiModal").appendTo("body"),$("body").on("click",".js-delete-btn",(function(e){e.preventDefault();var btn=$(this),targetUrl=btn.attr("href"),msg=btn.attr("data-confirm-msg");Notification.confirm(config.strings.confirm_title,msg,config.strings.yes,config.strings.cancel,(function(){window.location.href=targetUrl}))})),$("#ph-btn-conjure").click((function(e){e.preventDefault();var btn=$(this),theme=$("#ai-theme").val(),xp=$("#ai-xp").val(),createDrop=$("#ai-drop").is(":checked");if(theme){var originalText=btn.text();btn.prop("disabled",!0).text("..."),$.ajax({url:M.cfg.wwwroot+"/blocks/playerhud/ajax_ai.php",method:"POST",dataType:"json",data:{instanceid:config.instanceid,id:config.courseid,theme:theme,xp:xp||0,create_drop:createDrop?1:0,sesskey:M.cfg.sesskey},success:function(resp){if(btn.prop("disabled",!1).text(originalText),$("#phAiModal").modal("hide"),resp.success){var rMsg=config.strings.success;if(resp.drop_code){var dHtml='<div class="mt-3 p-3 bg-light border rounded text-center">';dHtml+='<h4 class="text-primary">'+resp.drop_code+"</h4>",dHtml+='<p class="small text-muted mb-0">'+config.strings.copy+"</p>",rMsg+=dHtml+="</div>"}Notification.alert(resp.item_name,rMsg,config.strings.great).then((function(){return window.location.reload(),!0})).catch(Notification.exception)}else Notification.alert("Error",resp.message,"OK")},error:function(xhr,status,error){btn.prop("disabled",!1).text(originalText),Notification.exception(error)}})}else Notification.alert("Error",config.strings.err_theme,"OK")}))}}}));

//# sourceMappingURL=manage_items.min.js.map