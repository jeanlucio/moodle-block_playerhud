define("block_playerhud/manage_items",["jquery","core/notification"],(function($,Notification){return{init:function(config){$("#phAiModal").appendTo("body"),$("body").on("click",".js-delete-btn",(function(e){e.preventDefault();var btn=$(this),targetUrl=btn.attr("href"),msg=btn.attr("data-confirm-msg");Notification.confirm(config.strings.confirm_title,msg,config.strings.yes,config.strings.cancel,(function(){window.location.href=targetUrl}))})),$("#ph-ai-form").on("submit",(function(e){e.preventDefault(),$("#ph-btn-conjure").click()})),$("#ph-btn-conjure").click((function(e){e.preventDefault();var btn=$(this);if(!btn.prop("disabled")){var theme=$("#ai-theme").val(),xp=$("#ai-xp").val(),createDrop=$("#ai-drop").is(":checked");if(theme){var originalText=btn.text();btn.prop("disabled",!0).text("..."),btn.attr("aria-busy","true"),$.ajax({url:M.cfg.wwwroot+"/blocks/playerhud/ajax_ai.php",method:"POST",dataType:"json",data:{instanceid:config.instanceid,id:config.courseid,theme:theme,xp:xp||0,create_drop:createDrop?1:0,sesskey:M.cfg.sesskey},success:function(resp){if(btn.prop("disabled",!1).text(originalText).removeAttr("aria-busy"),resp.success){var modalBody=$("#phAiModal .modal-body"),modalFooter=$("#phAiModal .modal-footer");$("#phAiModalLabel").text(resp.item_name);var successHtml='<div id="ph-success-container" tabindex="-1" class="text-center py-3 animate__animated animate__fadeIn" style="outline: none;">';successHtml+='<div class="mb-3" style="font-size: 3rem; color: #28a745;" aria-hidden="true"><i class="fa fa-check-circle"></i></div>',successHtml+='<h3 class="fw-bold h4">'+config.strings.success+"</h3>",resp.drop_code&&(successHtml+='<div class="mt-3 p-3 bg-light border rounded">',successHtml+='<label class="small text-muted mb-1">'+config.strings.copy+"</label>",successHtml+='<h4 class="text-primary font-monospace select-all">'+resp.drop_code+"</h4>",successHtml+="</div>"),successHtml+="</div>",modalBody.html(successHtml);var btnReload=$('<button class="btn btn-success w-100 py-2 fw-bold">'+config.strings.great+"</button>");btnReload.on("click",(function(){window.location.reload()})),modalFooter.empty().append(btnReload),setTimeout((function(){$("#ph-success-container").focus()}),100)}else Notification.alert("Error",resp.message,"OK")},error:function(xhr,status,error){btn.prop("disabled",!1).text(originalText).removeAttr("aria-busy"),Notification.exception(error)}})}else Notification.alert("Error",config.strings.err_theme,"OK")}}))}}}));

//# sourceMappingURL=manage_items.min.js.map