{{! @template block_playerhud/manage_drops_table }}
<div class="d-flex align-items-center mb-4 border-bottom pb-3">
    <a href="{{url_course}}" class="btn btn-outline-secondary me-3 shadow-sm">
        <i class="fa fa-arrow-left" aria-hidden="true"></i> {{str_back_course}}
    </a>
    <div class="d-flex align-items-center">
        {{#is_image}}
            <img src="{{media_url}}" style="width:50px; height:50px; object-fit:contain; margin-right:15px;" alt="">
        {{/is_image}}
        {{^is_image}}
            <span style="font-size:40px; margin-right:15px;" aria-hidden="true">{{media_content}}</span>
        {{/is_image}}
        <div>
            <small class="text-muted text-uppercase fw-bold">{{str_managing}}</small>
            <h2 class="m-0">{{item_name}}</h2>
        </div>
    </div>
    
    <div class="ms-auto d-flex gap-2">
        <a href="{{url_library}}" class="btn btn-outline-dark shadow-sm">
            <i class="fa fa-book" aria-hidden="true"></i> {{str_back_lib}}
        </a>
        <a href="{{url_new_drop}}" class="btn btn-success shadow-sm">
            <i class="fa fa-plus" aria-hidden="true"></i> {{str_new_drop}}
        </a>
    </div>
</div>

<div class="alert alert-light border shadow-sm d-flex align-items-center mb-3">
    <i class="fa fa-map-signs text-info me-2 fa-lg" aria-hidden="true"></i>
    <span class="fw-bold text-dark">{{summary_text}}</span>
</div>

<form action="{{base_url}}" method="post" id="bulk-action-form">
    <input type="hidden" name="action" value="bulk_delete">
    <input type="hidden" name="sesskey" value="{{sesskey}}">

    <div class="card shadow-sm border-0">
        <div class="card-body p-0">
            <table class="table table-hover table-striped mb-0 align-middle">
                <thead class="bg-light">
                    <tr>
                        <th scope="col" style="width: 40px;" class="text-center">
                            <label class="visually-hidden" for="ph-select-all">{{str_select_all}}</label>
                            <input type="checkbox" id="ph-select-all" class="form-check-input">
                        </th>
                        <th scope="col" style="width: 50px;">N.</th>
                        <th scope="col">{{{link_sort_name}}}</th>
                        <th scope="col" style="width: 130px;">{{{link_sort_qty}}}</th>
                        <th scope="col" style="width: 150px;">{{{link_sort_time}}}</th>
                        <th scope="col" style="width: 180px;">{{str_col_gen}}</th>
                        <th scope="col" class="text-end" style="width: 220px;">{{str_actions}}</th>
                    </tr>
                </thead>
                <tbody>
                    {{#drops}}
                    <tr>
                        <td class="align-middle text-center">
                            <label class="visually-hidden" for="chk-{{id}}">{{str_select}}</label>
                            <input type="checkbox" name="bulk_ids[]" value="{{id}}" id="chk-{{id}}" class="form-check-input ph-bulk-check">
                        </td>
                        <td class="align-middle text-muted small">{{counter}}</td>
                        <td class="align-middle fw-bold">{{name}}</td>
                        <td class="align-middle">
                            {{#is_infinite}}
                                <span class="badge bg-success"><i class="fa fa-infinity" aria-hidden="true"></i> {{str_infinite}}</span>
                            {{/is_infinite}}
                            {{^is_infinite}}
                                <span class="badge bg-light text-dark border border-secondary">Max: {{maxusage}}</span>
                            {{/is_infinite}}
                        </td>
                        <td class="align-middle">
                            {{#is_immediate}}
                                <span class="badge bg-light text-dark border shadow-sm"><i class="fa fa-bolt text-warning" aria-hidden="true"></i> {{str_immediate}}</span>
                            {{/is_immediate}}
                            {{^is_immediate}}
                                <span class="badge bg-warning text-dark border border-warning" title="{{respawntime}}s">
                                    <i class="fa fa-clock-o" aria-hidden="true"></i> {{respawntime_fmt}}
                                </span>
                            {{/is_immediate}}
                        </td>
                        <td class="align-middle">
                            <button type="button" class="btn btn-outline-dark btn-sm js-open-gen-modal w-100"
                                    data-dropcode="{{display_code}}" title="{{str_gen_title}}">
                                <i class="fa fa-cogs" aria-hidden="true"></i> {{str_gen_btn}}
                            </button>
                        </td>
                        <td class="align-middle text-end">
                            <a href="{{url_edit}}" class="btn btn-sm btn-primary me-1 shadow-sm">
                                <i class="fa fa-pencil" aria-hidden="true"></i> {{str_edit}}
                            </a>
                            <a href="{{url_delete}}" class="btn btn-sm btn-danger shadow-sm js-delete-btn" 
                               data-confirm-msg="{{confirm_msg}}">
                                <i class="fa fa-trash" aria-hidden="true"></i> {{str_delete}}
                            </a>
                        </td>
                    </tr>
                    {{/drops}}
                    {{^drops}}
                        <tr><td colspan="7" class="text-center p-3">{{str_empty_drops}}</td></tr>
                    {{/drops}}
                </tbody>
            </table>
        </div>
    </div>

    <div class="mt-3 mb-3">
        <button type="button" class="btn btn-danger shadow-sm disabled" id="ph-btn-bulk-delete" disabled>
            <i class="fa fa-trash" aria-hidden="true"></i> {{str_delete_selected}}
        </button>
    </div>

    <div class="alert alert-info mt-3">
        {{str_help_code}}
    </div>
</form>

{{{modal_gen_html}}}
